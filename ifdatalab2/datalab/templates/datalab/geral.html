<div class="container_dados">
    <a href="?view=pesquisadores">
        <div class="custom-div">
            <p class="number">{{ metrics.total_autores }}</p>
            <p class="description">Pesquisadores</p>
        </div>
    </a>
    <a href="?view=publicacoes">
        <div class="custom-div">
            <p class="number">{{ metrics.total_publicacoes }}</p>
            <p class="description">Publicações</p>
        </div>
    </a>
    {% comment %} Adicione os outros cards aqui... {% endcomment %}
</div>

<hr>

{% if view_selecionada == 'publicacoes' %}
    <h2>Detalhes: Todas as Publicações</h2>
    <table>
        <thead>
            <tr><th>Autor</th><th>Título</th><th>Campus</th></tr>
        </thead>
        <tbody>
        {% for pub in publicacoes %}
            <tr>
                <td>{{ pub.pesquisador.nome_completo }}</td>
                <td>{{ pub.titulo }}</td>
                <td>{{ pub.campus.nome_campus }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="3">Nenhuma publicação encontrada.</td></tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <h2>Pesquisadores (Dados Lattes)</h2>
    <table>
        <thead>
            <tr><th>Nome</th><th>ID Lattes</th><th>Função</th><th>Campus</th></tr>
        </thead>
        <tbody>
        {% for pesquisador in pesquisadores_lattes %}
            <tr>
                <td>{{ pesquisador.nome_completo }}</td>
                <td>{{ pesquisador.idlattes }}</td>
                <td>{{ pesquisador.get_funcao_display }}</td> {# Usa o valor legível da 'funcao' #}
                <td>{{ pesquisador.campus.nome_campus }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="4">Nenhum pesquisador encontrado.</td></tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
